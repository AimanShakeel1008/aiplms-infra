# ---------------------------
# auth-service (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${AUTH_DB_NAME:auth_db}
    username: ${AUTH_DB_USER:auth_user}
    password: ${AUTH_DB_PASS:auth_pass_local}
    driver-class-name: org.postgresql.Driver
  flyway:
    enabled: true
    locations: classpath:db/migration
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: always

logging:
  level:
    root: INFO

otel:
  exporter:
    otlp:
      endpoint: ${JAEGER_OTLP_ENDPOINT:http://jaeger:14268}
  service:
    name: auth-service

security:
  jwt:
    issuer: "aip-lms"
    jwks-uri: "http://auth-service:8081/.well-known/jwks.json"

# ---------------------------
# user-service (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${USER_DB_NAME:user_db}
    username: ${USER_DB_USER:user_user}
    password: ${USER_DB_PASS:user_pass_local}
  flyway:
    enabled: true
    locations: classpath:db/migration

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus

# ---------------------------
# content-service (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${CONTENT_DB_NAME:content_db}
    username: ${CONTENT_DB_USER:content_user}
    password: ${CONTENT_DB_PASS:content_pass_local}
  flyway:
    enabled: true
    locations: classpath:db/migration

minio:
  endpoint: http://${MINIO_HOST:minio}:${MINIO_PORT:9000}
  access-key: ${MINIO_ROOT_USER:minioadmin}
  secret-key: ${MINIO_ROOT_PASSWORD:minioadmin}
  bucket: ${MINIO_BUCKET:content-bucket}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus

# ---------------------------
# ingest-service (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${INGEST_DB_NAME:ingest_db}
    username: ${INGEST_DB_USER:ingest_user}
    password: ${INGEST_DB_PASS:ingest_pass_local}
  flyway:
    enabled: true
    locations: classpath:db/migration

rabbitmq:
  host: ${RABBITMQ_HOST:rabbitmq}
  port: ${RABBITMQ_PORT:5672}
  username: ${RABBITMQ_USER:aip_rmq}
  password: ${RABBITMQ_PASS:ChangeMeLocal!123}

vectordb:
  host: ${MILVUS_HOST:milvus}
  port: ${MILVUS_PORT:19530}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus

# ---------------------------
# qa-service (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${QA_DB_NAME:qa_db}
    username: ${QA_DB_USER:qa_user}
    password: ${QA_DB_PASS:qa_pass_local}
  flyway:
    enabled: true
    locations: classpath:db/migration

opensearch:
  host: ${OPENSEARCH_HOST:opensearch}
  port: ${OPENSEARCH_PORT:9200}

llm:
  provider: local
  cache:
    enabled: true
    ttl-seconds: 3600

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus

# ---------------------------
# gateway-graphql (application.yml)
# ---------------------------
spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/${GATEWAY_DB_NAME:gateway_db}
    username: ${GATEWAY_DB_USER:gateway_user}
    password: ${GATEWAY_DB_PASS:gateway_pass_local}

graphql:
  playground:
    enabled: true

security:
  jwt:
    jwks-uri: http://auth-service:8081/.well-known/jwks.json

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
